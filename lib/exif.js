const _0x551f9a=_0x12d1;(function(_0x10717b,_0x57c7fc){const _0x498617=_0x12d1,_0x4a69e9=_0x10717b();while(!![]){try{const _0x42121a=parseInt(_0x498617(0xa1))/0x1*(-parseInt(_0x498617(0xa3))/0x2)+parseInt(_0x498617(0xc5))/0x3+-parseInt(_0x498617(0xdc))/0x4+-parseInt(_0x498617(0xab))/0x5+parseInt(_0x498617(0xd3))/0x6+parseInt(_0x498617(0xaf))/0x7+parseInt(_0x498617(0xd1))/0x8*(parseInt(_0x498617(0xc4))/0x9);if(_0x42121a===_0x57c7fc)break;else _0x4a69e9['push'](_0x4a69e9['shift']());}catch(_0x22cf66){_0x4a69e9['push'](_0x4a69e9['shift']());}}}(_0x3bc2,0x9836b));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x551f9a(0xca)),ff=require('fluent-ffmpeg'),ffmpegPath=require(_0x551f9a(0xcc))[_0x551f9a(0xae)],webp=require(_0x551f9a(0xaa)),{exec}=require(_0x551f9a(0xba)),path=require(_0x551f9a(0xae));ff['setFfmpegPath'](ffmpegPath);async function imageToWebp(_0x44b64d){const _0x5a07ad=_0x551f9a,_0x20dc1f=path['join'](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x5a07ad(0xa9)](0x24)+_0x5a07ad(0xc7)),_0x17ee55=path['join'](tmpdir(),Crypto[_0x5a07ad(0xa0)](0x6)[_0x5a07ad(0xa7)](0x0,0x6)[_0x5a07ad(0xa9)](0x24)+_0x5a07ad(0xac));fs['writeFileSync'](_0x17ee55,_0x44b64d),await new Promise((_0xbaf89,_0x51cbd1)=>{const _0x6c1a33=_0x5a07ad;ff(_0x17ee55)['on'](_0x6c1a33(0xd2),_0x51cbd1)['on'](_0x6c1a33(0xcb),()=>_0xbaf89(!![]))[_0x6c1a33(0xa6)]([_0x6c1a33(0xd5),_0x6c1a33(0xd7),'-vf','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse'])[_0x6c1a33(0x9e)]('webp')[_0x6c1a33(0xc1)](_0x20dc1f);});const _0x555e9e=fs[_0x5a07ad(0xb7)](_0x20dc1f);return fs[_0x5a07ad(0xa8)](_0x20dc1f),fs[_0x5a07ad(0xa8)](_0x17ee55),_0x555e9e;}async function videoToWebp(_0x36601f){const _0x3221ba=_0x551f9a,_0x1a2d38=path[_0x3221ba(0xd9)](tmpdir(),Crypto[_0x3221ba(0xa0)](0x6)['readUIntLE'](0x0,0x6)[_0x3221ba(0xa9)](0x24)+_0x3221ba(0xc7)),_0x139709=path['join'](tmpdir(),Crypto[_0x3221ba(0xa0)](0x6)[_0x3221ba(0xa7)](0x0,0x6)[_0x3221ba(0xa9)](0x24)+_0x3221ba(0xcf));fs[_0x3221ba(0xd8)](_0x139709,_0x36601f),await new Promise((_0x18af46,_0x52d6bc)=>{const _0xe0c3ac=_0x3221ba;ff(_0x139709)['on'](_0xe0c3ac(0xd2),_0x52d6bc)['on'](_0xe0c3ac(0xcb),()=>_0x18af46(!![]))[_0xe0c3ac(0xa6)]([_0xe0c3ac(0xd5),'libwebp',_0xe0c3ac(0xa2),_0xe0c3ac(0xda),_0xe0c3ac(0xb9),'0',_0xe0c3ac(0xb4),_0xe0c3ac(0xad),'-t',_0xe0c3ac(0xbb),'-preset',_0xe0c3ac(0xc8),_0xe0c3ac(0x9d),_0xe0c3ac(0xc2),'0'])[_0xe0c3ac(0x9e)](_0xe0c3ac(0xc9))[_0xe0c3ac(0xc1)](_0x1a2d38);});const _0x292356=fs['readFileSync'](_0x1a2d38);return fs['unlinkSync'](_0x1a2d38),fs[_0x3221ba(0xa8)](_0x139709),_0x292356;}async function writeExifImg(_0x36ddfd,_0x4f9936){const _0x2e31a5=_0x551f9a;let _0x1e0fd2=await imageToWebp(_0x36ddfd);const _0x42f2fe=path[_0x2e31a5(0xd9)](tmpdir(),Crypto[_0x2e31a5(0xa0)](0x6)[_0x2e31a5(0xa7)](0x0,0x6)[_0x2e31a5(0xa9)](0x24)+'.webp'),_0x6be8dc=path[_0x2e31a5(0xd9)](tmpdir(),Crypto[_0x2e31a5(0xa0)](0x6)[_0x2e31a5(0xa7)](0x0,0x6)[_0x2e31a5(0xa9)](0x24)+_0x2e31a5(0xc7));fs[_0x2e31a5(0xd8)](_0x42f2fe,_0x1e0fd2);if(_0x4f9936[_0x2e31a5(0xdb)]||_0x4f9936[_0x2e31a5(0xb1)]){const _0x535686=new webp['Image'](),_0x46fc73={'sticker-pack-id':'https://github.com/DikaArdnt/Hisoka-Morou','sticker-pack-name':_0x4f9936[_0x2e31a5(0xdb)],'sticker-pack-publisher':_0x4f9936[_0x2e31a5(0xb1)],'emojis':_0x4f9936[_0x2e31a5(0xa4)]?_0x4f9936[_0x2e31a5(0xa4)]:['']},_0x312628=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x42c01f=Buffer[_0x2e31a5(0xd6)](JSON[_0x2e31a5(0xbf)](_0x46fc73),'utf-8'),_0x291215=Buffer[_0x2e31a5(0xcd)]([_0x312628,_0x42c01f]);return _0x291215[_0x2e31a5(0xa5)](_0x42c01f['length'],0xe,0x4),await _0x535686[_0x2e31a5(0xc3)](_0x42f2fe),fs['unlinkSync'](_0x42f2fe),_0x535686[_0x2e31a5(0xb2)]=_0x291215,await _0x535686[_0x2e31a5(0xc1)](_0x6be8dc),_0x6be8dc;}}function _0x12d1(_0x4affed,_0x1c732b){const _0x3bc2f0=_0x3bc2();return _0x12d1=function(_0x12d1da,_0xa8c4ca){_0x12d1da=_0x12d1da-0x9d;let _0x23af94=_0x3bc2f0[_0x12d1da];return _0x23af94;},_0x12d1(_0x4affed,_0x1c732b);}async function writeExifVid(_0x5b5f85,_0x1b7780){const _0x211f19=_0x551f9a;let _0x136360=await videoToWebp(_0x5b5f85);const _0x8144a5=path[_0x211f19(0xd9)](tmpdir(),Crypto[_0x211f19(0xa0)](0x6)[_0x211f19(0xa7)](0x0,0x6)[_0x211f19(0xa9)](0x24)+'.webp'),_0x2c2232=path[_0x211f19(0xd9)](tmpdir(),Crypto[_0x211f19(0xa0)](0x6)[_0x211f19(0xa7)](0x0,0x6)[_0x211f19(0xa9)](0x24)+_0x211f19(0xc7));fs[_0x211f19(0xd8)](_0x8144a5,_0x136360);if(_0x1b7780[_0x211f19(0xdb)]||_0x1b7780[_0x211f19(0xb1)]){const _0x4f3aac=new webp['Image'](),_0xdeba84={'sticker-pack-id':_0x211f19(0xc0),'sticker-pack-name':_0x1b7780['packname'],'sticker-pack-publisher':_0x1b7780[_0x211f19(0xb1)],'emojis':_0x1b7780[_0x211f19(0xa4)]?_0x1b7780['categories']:['']},_0x3ed7f1=Buffer[_0x211f19(0xd6)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x45a417=Buffer[_0x211f19(0xd6)](JSON[_0x211f19(0xbf)](_0xdeba84),_0x211f19(0xbd)),_0x4d076a=Buffer[_0x211f19(0xcd)]([_0x3ed7f1,_0x45a417]);return _0x4d076a[_0x211f19(0xa5)](_0x45a417[_0x211f19(0xb5)],0xe,0x4),await _0x4f3aac[_0x211f19(0xc3)](_0x8144a5),fs[_0x211f19(0xa8)](_0x8144a5),_0x4f3aac[_0x211f19(0xb2)]=_0x4d076a,await _0x4f3aac[_0x211f19(0xc1)](_0x2c2232),_0x2c2232;}}async function writeExif(_0x104fa7,_0x510423){const _0x349b7e=_0x551f9a;let _0x1ad7f0=/webp/[_0x349b7e(0xd4)](_0x104fa7[_0x349b7e(0xce)])?_0x104fa7[_0x349b7e(0xd0)]:/image/[_0x349b7e(0xd4)](_0x104fa7['mimetype'])?await imageToWebp(_0x104fa7[_0x349b7e(0xd0)]):/video/['test'](_0x104fa7[_0x349b7e(0xce)])?await videoToWebp(_0x104fa7[_0x349b7e(0xd0)]):'';const _0x551a7f=path[_0x349b7e(0xd9)](tmpdir(),Crypto[_0x349b7e(0xa0)](0x6)[_0x349b7e(0xa7)](0x0,0x6)[_0x349b7e(0xa9)](0x24)+_0x349b7e(0xc7)),_0x206cf2=path[_0x349b7e(0xd9)](tmpdir(),Crypto[_0x349b7e(0xa0)](0x6)[_0x349b7e(0xa7)](0x0,0x6)[_0x349b7e(0xa9)](0x24)+'.webp');fs[_0x349b7e(0xd8)](_0x551a7f,_0x1ad7f0);if(_0x510423[_0x349b7e(0xdb)]||_0x510423['author']){const _0x327908=new webp[(_0x349b7e(0xb0))](),_0x4c3d82={'sticker-pack-id':_0x349b7e(0xc0),'sticker-pack-name':_0x510423[_0x349b7e(0xdb)],'sticker-pack-publisher':_0x510423['author'],'emojis':_0x510423[_0x349b7e(0xa4)]?_0x510423[_0x349b7e(0xa4)]:['']},_0x58c187=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1ee10c=Buffer[_0x349b7e(0xd6)](JSON[_0x349b7e(0xbf)](_0x4c3d82),_0x349b7e(0xbd)),_0x1fc154=Buffer['concat']([_0x58c187,_0x1ee10c]);return _0x1fc154['writeUIntLE'](_0x1ee10c[_0x349b7e(0xb5)],0xe,0x4),await _0x327908['load'](_0x551a7f),fs[_0x349b7e(0xa8)](_0x551a7f),_0x327908[_0x349b7e(0xb2)]=_0x1fc154,await _0x327908[_0x349b7e(0xc1)](_0x206cf2),_0x206cf2;}}function _0x3bc2(){const _0x296e5e=['\x20-vn\x20-ab\x20128k\x20-ar\x2044100\x20-y\x20','stringify','https://github.com/DGXeon','save','-vsync','load','1762452jOhLKG','254715LADCpv','../temp/','.webp','default','webp','crypto','end','@ffmpeg-installer/ffmpeg','concat','mimetype','.mp4','data','16uOtyGY','error','5291934BgrQnc','test','-vcodec','from','libwebp','writeFileSync','join','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','packname','640604zuSAVy','-an','toFormat','.mp3','randomBytes','1kDtamO','-vf','2068666sCRpQu','categories','writeUIntLE','addOutputOptions','readUIntLE','unlinkSync','toString','node-webpmux','332830LBHJWN','.jpg','00:00:00','path','3681769HajIkI','Image','author','exif','replace','-ss','length','ffmpeg\x20-i\x20','readFileSync','exports','-loop','child_process','00:00:05','now','utf-8'];_0x3bc2=function(){return _0x296e5e;};return _0x3bc2();}const toAudio=(_0x4d55dc,_0x351c58='mp4')=>{return new Promise((_0x2cdbd0,_0xf33fda)=>{const _0x47c66b=_0x12d1,_0x502254=path[_0x47c66b(0xd9)](__dirname,_0x47c66b(0xc6)+Date[_0x47c66b(0xbc)]()+'.'+_0x351c58),_0x5ca2ba=_0x502254[_0x47c66b(0xb3)](/\.(mp4|mkv)$/,_0x47c66b(0x9f));fs[_0x47c66b(0xd8)](_0x502254,_0x4d55dc),exec(_0x47c66b(0xb6)+_0x502254+_0x47c66b(0xbe)+_0x5ca2ba,_0x37d2b3=>{const _0x38411b=_0x47c66b;fs[_0x38411b(0xa8)](_0x502254);if(_0x37d2b3)return _0xf33fda(_0x37d2b3);const _0x5c230d=fs[_0x38411b(0xb7)](_0x5ca2ba);fs[_0x38411b(0xa8)](_0x5ca2ba),_0x2cdbd0(_0x5c230d);});});};module[_0x551f9a(0xb8)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif,'toAudio':toAudio};